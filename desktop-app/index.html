<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' wss://*.signalwire.com wss://*.sip.signalwire.com https://*.signalwire.com; media-src 'self' blob:;">
  <title>SMB Voice</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="8" fill="#C9A227"/>
          <path d="M16 6C10.48 6 6 10.48 6 16s4.48 10 10 10 10-4.48 10-10S21.52 6 16 6zm-1 15h-2v-6h2v6zm4 0h-2v-6h2v6zm0-8h-6v-2h6v2z" fill="white"/>
        </svg>
        <span class="logo-text">SMB Voice</span>
      </div>
      <div class="status-indicator" id="statusIndicator">
        <span class="status-dot offline"></span>
        <span class="status-text">Offline</span>
      </div>
    </header>

    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
      <div class="login-container">
        <div class="login-header">
          <h1>Welcome</h1>
          <p>Sign in to your SMB Voice account</p>
        </div>
        <form id="loginForm" class="login-form">
          <div class="form-group">
            <label for="sipServer">SIP Server</label>
            <input type="text" id="sipServer" placeholder="sip.signalwire.com" required>
          </div>
          <div class="form-group">
            <label for="sipUser">Extension / Username</label>
            <input type="text" id="sipUser" placeholder="100" required>
          </div>
          <div class="form-group">
            <label for="sipPassword">Password</label>
            <input type="password" id="sipPassword" placeholder="Your SIP password" required>
          </div>
          <div class="form-group">
            <label for="displayName">Display Name</label>
            <input type="text" id="displayName" placeholder="John Doe">
          </div>
          <button type="submit" class="btn btn-primary btn-block">
            <span class="btn-text">Connect</span>
            <span class="btn-loading" style="display:none;">Connecting...</span>
          </button>
        </form>
        <div class="login-footer">
          <p>Need help? <a href="https://voice.startmybusiness.us/help" target="_blank">Contact Support</a></p>
        </div>
      </div>
    </div>

    <!-- Main Phone Screen -->
    <div id="phoneScreen" class="screen">
      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" data-tab="dialpad">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 19c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
          </svg>
          Dialpad
        </button>
        <button class="tab" data-tab="history">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
          </svg>
          History
        </button>
        <button class="tab" data-tab="settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
          Settings
        </button>
      </div>

      <!-- Dialpad Tab -->
      <div id="dialpadTab" class="tab-content active">
        <div class="phone-display">
          <input type="text" id="phoneNumber" class="phone-input" placeholder="Enter number" readonly>
          <button id="backspaceBtn" class="backspace-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"/>
            </svg>
          </button>
        </div>
        <div class="dialpad">
          <button class="dialpad-btn" data-digit="1">1<span></span></button>
          <button class="dialpad-btn" data-digit="2">2<span>ABC</span></button>
          <button class="dialpad-btn" data-digit="3">3<span>DEF</span></button>
          <button class="dialpad-btn" data-digit="4">4<span>GHI</span></button>
          <button class="dialpad-btn" data-digit="5">5<span>JKL</span></button>
          <button class="dialpad-btn" data-digit="6">6<span>MNO</span></button>
          <button class="dialpad-btn" data-digit="7">7<span>PQRS</span></button>
          <button class="dialpad-btn" data-digit="8">8<span>TUV</span></button>
          <button class="dialpad-btn" data-digit="9">9<span>WXYZ</span></button>
          <button class="dialpad-btn" data-digit="*">*</button>
          <button class="dialpad-btn" data-digit="0">0<span>+</span></button>
          <button class="dialpad-btn" data-digit="#">#</button>
        </div>
        <div class="call-actions">
          <button id="callBtn" class="call-btn">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- History Tab -->
      <div id="historyTab" class="tab-content">
        <div class="history-list" id="historyList">
          <div class="empty-state">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
              <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
            </svg>
            <p>No recent calls</p>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settingsTab" class="tab-content">
        <div class="settings-list">
          <div class="settings-section">
            <h3>Account</h3>
            <div class="settings-item">
              <span class="settings-label">Extension</span>
              <span class="settings-value" id="settingsExtension">-</span>
            </div>
            <div class="settings-item">
              <span class="settings-label">Server</span>
              <span class="settings-value" id="settingsServer">-</span>
            </div>
            <div class="settings-item">
              <span class="settings-label">Status</span>
              <span class="settings-value" id="settingsStatus">Offline</span>
            </div>
          </div>
          <div class="settings-section">
            <h3>Audio</h3>
            <div class="settings-item">
              <span class="settings-label">Microphone</span>
              <select id="microphoneSelect" class="settings-select">
                <option value="default">Default</option>
              </select>
            </div>
            <div class="settings-item">
              <span class="settings-label">Speaker</span>
              <select id="speakerSelect" class="settings-select">
                <option value="default">Default</option>
              </select>
            </div>
          </div>
          <div class="settings-section">
            <h3>About</h3>
            <div class="settings-item">
              <span class="settings-label">Version</span>
              <span class="settings-value">1.0.0</span>
            </div>
            <div class="settings-item">
              <span class="settings-label">Support</span>
              <a href="tel:8885344145" class="settings-link">888-534-4145</a>
            </div>
          </div>
          <button id="logoutBtn" class="btn btn-danger btn-block">Disconnect</button>
        </div>
      </div>
    </div>

    <!-- Active Call Screen -->
    <div id="callScreen" class="screen">
      <div class="call-info">
        <div class="caller-avatar">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </div>
        <div class="caller-name" id="callerName">Unknown</div>
        <div class="caller-number" id="callerNumber">+1 (555) 000-0000</div>
        <div class="call-status" id="callStatus">Calling...</div>
        <div class="call-timer" id="callTimer">00:00</div>
      </div>
      <div class="call-controls">
        <button class="call-control-btn" id="muteBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
          </svg>
          <span>Mute</span>
        </button>
        <button class="call-control-btn" id="holdBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
          </svg>
          <span>Hold</span>
        </button>
        <button class="call-control-btn" id="speakerBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
          </svg>
          <span>Speaker</span>
        </button>
        <button class="call-control-btn" id="dialpadCallBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 19c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
          </svg>
          <span>Keypad</span>
        </button>
      </div>
      <button id="endCallBtn" class="end-call-btn">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
        </svg>
      </button>
    </div>

    <!-- Incoming Call Modal -->
    <div id="incomingCallModal" class="modal">
      <div class="modal-content incoming-call">
        <div class="caller-avatar pulse">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </div>
        <div class="incoming-caller-name" id="incomingCallerName">Unknown Caller</div>
        <div class="incoming-caller-number" id="incomingCallerNumber">+1 (555) 000-0000</div>
        <div class="incoming-actions">
          <button id="declineCallBtn" class="incoming-btn decline">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
            </svg>
          </button>
          <button id="answerCallBtn" class="incoming-btn answer">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Audio elements for ringtones and calls -->
  <audio id="ringtone" loop>
    <source src="assets/ringtone.mp3" type="audio/mpeg">
  </audio>
  <audio id="remoteAudio" autoplay></audio>

  <script src="renderer.js"></script>
</body>
</html>
